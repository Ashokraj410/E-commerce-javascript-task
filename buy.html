<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="style 11.css">
    
</head>
<body>
    <form action="" name="formreg" onsubmit="return validateForm()" id="delivery-form">
        <h2>Delivery Address</h2>
        <div class="name">
            <label for="text">Name</label>
            <input type="text" id="name" name="name" placeholder="Enter your name">
            <span id="name-error" name="error-message"></span>
        </div>
        <div class="email">  
            <label for="text">Email</label>
            <input type="email" id="email" name="email" placeholder="Enter your email ">
            <span id="email-error" name="error-message"></span>
        </div>
        <div class="number">
            <label for="text">Phonenumber</label>
            <input type="number" id="Phonenumber" name="tel" placeholder="Enter your Phonenumber">
            <span id="Phonenumber-error" name="error-message"></span>
        </div>
        
        <div class="area">
            <label for="text">Area</label>
            <input type="text" id="area" name="name" placeholder="Enter your street name">
            <span id="area-error" name="error-message"></span>
        </div>
        <div class="city">
            <label for="text">City</label>
            <input type="text" id="city" name="name" placeholder="Enter your city">
            <span id="city-error" name="error-message"></span>
        </div>
        <div class="divide">
            <div class="state">
                <label for="text">state</label>
                <input type="text" id="state" name="name" placeholder="Enter your state">
                <span id="state-error" name="error-message"></span>
            </div>
            <div class="pincode">
                <label for="text">pincode</label>
                <input type="number" id="pincode" name="pincode" placeholder="Enter your pincode">
                <span id="pincode-error" name="error-message"></span>
            </div>

        </div>
        <div class="submit">
            <button type="submit">Delivery here</button>
        </div>
        <div class="home">
            <a href="index.html" class="home-button">Home</a>
        </div>

    </form>
    


    <script>



    document.getElementById('delivery-form').addEventListener('submit', function(e) {
      e.preventDefault();  // prevent default redirect
      if (!validateForm()) return;  // only redirect if valid

      // Pass data via URL or sessionStorage if needed
      window.location.href = 'cash.html';
    });
    
    
    
    
    
    function validateForm() {
    let name = document.getElementById("name").value.trim();
    let email = document.getElementById("email").value.trim();
    let phone = document.getElementById("Phonenumber").value.trim();
    let area = document.getElementById("area").value.trim();
    let city = document.getElementById("city").value.trim();
    let state = document.getElementById("state").value.trim();
    let pincode = document.getElementById("pincode").value.trim();

    // error messages
    document.getElementById("name-error").innerText = "";
    document.getElementById("email-error").innerText = "";
    document.getElementById("Phonenumber-error").innerText = "";
    document.getElementById("area-error").innerText = "";
    document.getElementById("city-error").innerText = "";
    document.getElementById("state-error").innerText = "";
    document.getElementById("pincode-error").innerText = "";

    let isValid = true;

    // Name validation
    if (name === "") {
        document.getElementById("name-error").innerText = "Name is required";
        isValid = false;
    }

    // Email validation
    if (email === "" || !email.includes("@")) {
        document.getElementById("email-error").innerText = "Valid email is required";
        isValid = false;
    }

    // Phone number validation
    if (phone === "" || phone.length < 10 || !/^\d{10}$/.test(phone)) {
        document.getElementById("Phonenumber-error").innerText = "Valid 10-digit phone number is required";
        isValid = false;
    }

    // Area validation
    if (area === "") {
        document.getElementById("area-error").innerText = "Area is required";
        isValid = false;
    }
    //state validation
    if (state === "") {
        document.getElementById("state-error").innerText = "State is required";
        isValid = false;
    }

    // City validation
    if (city === "") {
        document.getElementById("city-error").innerText = "City is required";
        isValid = false;
    }

    // Pincode validation
    if (pincode === "" || !/^\d{6}$/.test(pincode)) {
        document.getElementById("pincode-error").innerText = "Valid 6-digit pincode";
        isValid = false;
    }
    if(isValid){
        const userData={
            name,email,phone,area,state,city,pincode
        }

        let users=JSON.parse(localStorage.getItem("users"))||[];
        users.push(userData);
        localStorage.setItem("users",JSON.stringify(users));
        window.location.href="customer.html";
    }

    return isValid; 
}
</script>

</body>
</html>